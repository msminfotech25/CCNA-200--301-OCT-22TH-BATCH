<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>MSM Info Tech - CCNA Course (Oct 22 Batch)</title>
<style>
    body { margin:0; font-family:Arial, sans-serif; background:#0a0a0a; color:white; }
    .hidden { display:none; }
    .container { padding:20px; max-width:900px; margin:auto; }
    h1,h2,h3 { text-align:center; }
    input,button { display:block; margin:10px auto; padding:10px; border-radius:8px; border:none; font-size:16px; }
    button { background:#00b894; color:white; cursor:pointer; transition:0.3s; }
    button:hover { background:#019874; transform:scale(1.05); }
    .video-section iframe { width:100%; height:400px; border-radius:12px; margin:20px 0; }
    .logout { float:right; margin:10px; background:#d63031; }
    .nav-btn { margin-top:20px; background:#0984e3; }
    .chat-output { background:#222; padding:10px; border-radius:10px; height:200px; overflow-y:auto; }
    .chat-input { width:70%; display:inline-block; padding:10px; border-radius:6px; border:none; }
    .chat-btn { width:20%; display:inline-block; background:#6c5ce7; }
    progress { width:100%; height:20px; border-radius:10px; margin-top:10px; }
    #welcome-msg { color:#00cec9; text-align:center; }
    #cert-btn { background:#ffb142; color:black; margin-top:20px; }
    @media (max-width:600px){
        .video-section iframe { height:250px; }
        .chat-input, .chat-btn { width:100%; display:block; margin:5px 0; }
    }
</style>
</head>
<body>

<!-- Login Page -->
<div id="login-page" class="container">
    <h1>MSM Info Tech - CCNA (Oct 22 Batch)</h1>
    <input type="text" id="username" placeholder="User ID">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="login-error" style="color:red;text-align:center;"></p>
</div>

<!-- Dashboard Page -->
<div id="dashboard-page" class="hidden container">
    <button class="logout" onclick="logout()">Logout</button>
    <h2 id="welcome-msg"></h2>
    <p style="text-align:center;">üìÖ Today: <span id="today-date"></span></p>
    <h3>Introduction</h3>
    <div class="video-section">
        <iframe src="https://drive.google.com/file/d/1i9oHsJ8wn3gYjUz8b3iYbKDUivseMfql/preview" allowfullscreen></iframe>
    </div>
    <h3>Progress</h3>
    <progress id="progress-bar" value="0" max="100"></progress>
    <p id="progress-text" style="text-align:center;">0% Completed</p>

    <div id="days-container"></div>

    <h3 style="text-align:center;color:#ffcc00;">After Day 22, Exam will be conducted. Minimum 80% mark required for Certificate. Below 80% ‚Üí Re-study & Re-exam.</h3>

    <button class="nav-btn" onclick="goToChat()">Go to CCNA Robot Chat ü§ñ</button>
    <button id="cert-btn" class="hidden" onclick="downloadCertificate()">Download Certificate üéì</button>
</div>

<!-- Chat Page -->
<div id="chat-page" class="hidden container">
    <button class="logout" onclick="backToDashboard()">‚¨Ö Back to Dashboard</button>
    <h2>CCNA Robot Chat ü§ñ</h2>
    <div class="chat-output" id="chat-output"></div>
    <input type="text" id="chat-input" class="chat-input" placeholder="Ask a CCNA question...">
    <button class="chat-btn" onclick="askQuestion()">Send</button>
</div>

<script>
// === STUDENT LIST (Oct 22 Batch) ===
const students = [
    {id: "msm251001", password: "Msm@251001", name: "Murugan"},
    {id: "msm251002", password: "Msm@251002", name: "Praveen R"},
    {id: "msm251003", password: "Msm@251003", name: "Karthickeyan T"},
    {id: "msm251004", password: "Msm@251004", name: "VISHNU D"},
];

// Add the remaining students as generic ones
for(let i=5;i<=50;i++){
    const num = (1000+i).toString().padStart(3,"0");
    students.push({id:`msm25${num}`, password:`Msm@25${num}`, name:`STUDENT ${i}`});
}

// === COURSE VIDEO LINKS (22 Days) ===
const courseVideos = {
    1:"https://drive.google.com/file/d/1d5KpfAV8oCRp5q6F-quFk9kPtPJ_vIam/preview",
    2:"https://drive.google.com/file/d/1R1RBjcj-KvLxy8uGjWCAgAb0XVncgOzK/preview",
    3:"https://drive.google.com/file/d/1rfkkMwcsRgj0y07F69PavQVf764KO-F8/preview",
    4:"https://drive.google.com/file/d/16SFAEqtPWbd-PYrO04ttH22U3IPuVXr8/preview",
    5:"https://drive.google.com/file/d/1D5FBkI_Cd8VpQg8syz4MlgoQcpu0mGlx/preview",
    6:"https://drive.google.com/file/d/1bb-cyUonHsAgQ9dPkqP-CRL2tqDq5Gvn/preview",
    7:"https://drive.google.com/file/d/1pQeUp7qb1uYYAvj0fK0SfZ4qUwW-bXwN/preview",
    8:"https://drive.google.com/file/d/1JBX5xzt7rBrEuRteWGSskWy4jHpEmN1i/preview",
    9:"https://drive.google.com/file/d/1jXVAdMiYmyjAQhhEQ66b7E7wwPMZ_P-6/preview",
    10:"https://drive.google.com/file/d/1d8MA-FwIyKKwyIULHAkAD8B3ZBA9RBWn/preview",
    11:"https://drive.google.com/file/d/1BUJo_TJD2L7Kiggy1kgMXNS9N1lyljaj/preview",
    12:"https://drive.google.com/file/d/1iIFYYErzqpWy5EpPxeltxJ7cncTownYa/preview",
    13:"https://drive.google.com/file/d/12PGBX5vk-k6Oy3KE1riS1KvwX6iTuain/preview",
    14:"https://drive.google.com/file/d/1Eu3ir_V2x2IwEAY2bwEHA-_V2L_VzQ8G/preview",
    15:"https://drive.google.com/file/d/1ZY8WsqbTQMlsWuyR--VqDsx8oBLWvJ0O/preview",
    16:"https://drive.google.com/file/d/1_viqwq4AvL-N43QCOPHSIRgChEoEHxrH/preview",
    17:"https://drive.google.com/file/d/1t8rN-4xtZwT1VlTn9uL6vFlrqB0BdApo/preview",
    18:"https://drive.google.com/file/d/1qf7j8KFEN3xPV69s5O5GiugtlROz0uIT/preview",
    19:"https://drive.google.com/file/d/1HYgJpfCvAql7oFc7l8WnI-Nh4pO1-A8e/preview",
    20:"https://drive.google.com/file/d/1ksw455V3vLzsWF-IuyLj48HV8LoRRUMh/preview",
    21:"https://drive.google.com/file/d/1J9lIaW7wVrrOXxNd8JFV4315_v4cpoSX/preview",
    22:"https://drive.google.com/file/d/14cGxnkDn-4t5ZWlGyzzJAVBZ8RT8ZJHy/preview"
};

// === APP LOAD ===
window.onload = function(){
    const user = JSON.parse(localStorage.getItem("loggedUser"));
    if(user){
        showUserDashboard(user);
    } else {
        document.getElementById("login-page").classList.remove("hidden");
    }
    document.getElementById("today-date").innerText = new Date().toDateString();
};

// === LOGIN ===
function login(){
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();
    const student = students.find(s => s.id === u && s.password === p);
    if(student){
        localStorage.setItem("loggedUser", JSON.stringify(student));
        showUserDashboard(student);
    } else {
        document.getElementById("login-error").innerText = "Invalid User ID or Password!";
    }
}

// === DISPLAY USER DASHBOARD ===
function showUserDashboard(user){
    document.getElementById("login-page").classList.add("hidden");
    document.getElementById("chat-page").classList.add("hidden");
    document.getElementById("dashboard-page").classList.remove("hidden");
    document.getElementById("welcome-msg").innerText = `Welcome ${user.name} (${user.id})`;
    setupDays();
}

// === LOGOUT ===
function logout(){
    localStorage.removeItem("loggedUser");
    document.getElementById("dashboard-page").classList.add("hidden");
    document.getElementById("chat-page").classList.add("hidden");
    document.getElementById("login-page").classList.remove("hidden");
}

// === DASHBOARD (DAY UNLOCK) ===
function setupDays(){
    const startDate = new Date("2025-10-22");
    const today = new Date();
    let html = "";
    let completedCount = 0;

    for(let d=1; d<=22; d++){
        const unlockDate = new Date(startDate);
        unlockDate.setDate(startDate.getDate() + d - 1);

        if(today >= unlockDate){
            const src = courseVideos[d] || "";
            html += `
                <h3>Day ${d}</h3>
                <div class="video-section">
                    <iframe src="${src}" allowfullscreen onload="markCompleted(${d})"></iframe>
                </div>
            `;
            completedCount++;
        } else {
            html += `
                <h3>Day ${d}</h3>
                <button disabled>Locked until ${unlockDate.toDateString()}</button>
            `;
        }
    }
    document.getElementById("days-container").innerHTML = html;

    const progress = Math.floor((completedCount / 22) * 100);
    document.getElementById("progress-bar").value = progress;
    document.getElementById("progress-text").innerText = `${progress}% Completed`;

    if(progress === 100){
        document.getElementById("cert-btn").classList.remove("hidden");
    } else {
        document.getElementById("cert-btn").classList.add("hidden");
    }
}

// === SIMPLE BOT ===
const qa = {
    "ccna":"CCNA is Cisco Certified Network Associate, entry-level networking certification.",
    "routing":"Routing selects best paths for data packets in a network.",
    "switching":"Switching moves data frames within the same network using MAC addresses.",
    "osi model":"OSI Model has 7 layers: Physical, Data Link, Network, Transport, Session, Presentation, Application.",
    "ip address":"An IP address identifies a device on a network.",
    "subnetting":"Subnetting divides a network into smaller subnets for efficiency.",
    "tcp":"TCP is reliable and connection-oriented.",
    "udp":"UDP is fast but connectionless.",
    "dhcp":"DHCP automatically assigns IP addresses to devices.",
    "dns":"DNS converts domain names to IP addresses."
};

function askQuestion(){
    const input = document.getElementById("chat-input");
    const q = input.value.trim();
    const question = q.toLowerCase();
    let answer = "‚ùå Sorry, I don‚Äôt know that. Try another CCNA question.";
    for (let key in qa){
        if(question.includes(key)){ answer = qa[key]; break; }
    }
    if(q !== ""){
        const output = document.getElementById("chat-output");
        output.innerHTML += `<p><b>You:</b> ${q}</p>`;
        output.innerHTML += `<p><b>Bot:</b> ${answer}</p>`;
        output.scrollTop = output.scrollHeight;
    }
    input.value = "";
}

function goToChat(){
    document.getElementById("dashboard-page").classList.add("hidden");
    document.getElementById("chat-page").classList.remove("hidden");
}
function backToDashboard(){
    document.getElementById("chat-page").classList.add("hidden");
    document.getElementById("dashboard-page").classList.remove("hidden");
}

function markCompleted(day){
    // reserved for future tracking
}

// === CERTIFICATE DOWNLOAD ===
function downloadCertificate(){
    const user = JSON.parse(localStorage.getItem("loggedUser"));
    if(!user) return;

    const certContent = `
        MSM Info Tech - CCNA Certificate
        -------------------------------
        This is to certify that
        ${user.name} (${user.id})
        has successfully completed the CCNA Course.
        Date: ${new Date().toDateString()}
    `;
    const blob = new Blob([certContent], {type:"text/plain"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${user.id}_CCNA_Certificate.txt`;
    a.click();
    URL.revokeObjectURL(url);
}
</script>
</body>
</html>
